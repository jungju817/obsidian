exif의 구조는 아래와 같다.

![](https://i.imgur.com/QZsEBaJ.png)

우리가 주목해야 할 것은 IFD이다.

![](https://i.imgur.com/zLa6SOb.png)

IFD:Image File Directory
이미지 정보를 담고있다.

여기서
TTTT(2바이트)는 tag,
ffff(2바이트)는 format,
NNNNNNNN(4바이트)는 components,
DDDDDDDD(4바이트)는 data혹은 data의 pointer이다.

Data format
![](https://i.imgur.com/MDOrEh4.png)

여기서 bytes/component = format 이여서 format x component로 전체 데이터 크기를 알 수 있다.
![](https://i.imgur.com/q1pAnXL.png)

위 표는 태그의 컴포넌트 개수에 최대값 제한을 나타낸 것이다.

---

exercise2에서 컴포넌트가 0x80000001 이였다. 말이 안되는 크기다. 정상적으로 보면 컴포넌트는 1이 되어야 한다.
만약 컴포넌트가 1이였다면 data크기가 0x10이고 index를 0, 1 참조하는것도 말이 된다.

![](https://i.imgur.com/1fDcF2H.png)

컴포넌트는 그냥 데이터 덩어리라고 보면 될 것 같다.

format은 한개의 컴포넌트당 몇 바이트인가 말하는 것이다.

그래서 exercise2에서 데이터영역에 적을 때 0 1 로 하는 것이다. 왜냐하면 component는 1이여야 하고 data크기는 0x10이기 때문이다.